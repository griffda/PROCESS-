*---------------Constraint Equations---------------*
* This is the DEMO 2019 run for Tokamaks as calculated by the stellarator version of PROCESS
* We set the density to the final result of the DEMO case: dene = 8.054E+19


* Equality constraints must come before any inequality constraints
* If there are ANY inequality constraints, the number of EQUALITY constraints must be stated

neqns = 2 * no_equality


*icc = 1 * icc_beta
icc = 2 * icc_powerbalance
*icc = 11 * icc_radialbuild
icc = 16 * icc_pnetel



*icc = 84 * icc_betalimlower

*icc = 52 * tritium breeding ratio lower limit
*icc = 17 * radiation fraction upper limit
*icc = 8 * neutron wall load upper limit
*icc = 67 * radiation wall load

* Inequalities
icc = 35 * icc_quench


icc = 34 * icc_dumbvoltage

icc = 65 * icc_stressVV

icc = 82 * icc_toroidalbuild

icc = 24 * icc_betalimupper
icc = 83 * icc_placeforblanket
icc = 32 * icc_maxstress
*icc = 75 * icc_maxcurrentcopper

icc = 18 * icc_divertor

*icc = 87 * icc_ecrhignitable

*icc = 28 *icc_bigqmin

*---------------Iteration Variables----------------*

ixc = 1 * itv_aspect
boundl(1) = 3.09
boundu(1) = 48.2

ixc = 2 * itv_bt
boundl(2) = 1.8
boundu(2) = 12.9

ixc = 3 * itv_rmajor
boundl(3) = 5.
boundu(3) = 85.2

ixc = 4 * itv_te
boundl(4) = 2.
boundu(4) = 19.5

ixc = 6 * itv_dene
boundl(6) = 8.35e19
boundu(6) = 8.35e21

ixc = 10 * itv_hfact
boundu(10) = 1.2
boundl(10) = 0.1

ixc = 25 * itv_fpnetel
boundl(25) = 0.97
boundu(25) = 0.99

*ixc = 29 * itv_bore
boundl(29) = 1.
boundu(29) = 30.


ixc = 50 * itv_fiooic
boundu(50) = 0.80
boundl(50) = 0.060


ixc = 59 * itv_fcutfsu
boundu(59) = 0.90
boundl(59) = 0.086



ixc = 56 * itv_tdmptf
boundl(56) = 0.001
boundu(56) = 200.


ixc = 165 * itv_te0ecrh
boundl(165) = 4.
boundu(165) = 35.


iblanket = 2
blktmodel = 1
iwalld = 2
ipowerflow = 0
istell = 6 *istell 6 means: Use a stella_config.json file in the local folder
aspect = 12.1 *Aspect ratio

epsfcn = 0.001 *convergence
dene = 2.554E+20 *Electron density (/m3)
hfact = 1. *H-factor on energy confinement times
fpnetel = 1. *f-value for net electric power
*fhldiv = 0.8 *f value for divertor heat load
ftoroidalgap = 1.0 * toroidalgap between coils
falpha = 0.90 *fast particle fraction
f_avspace = 0.99 * toroidalgap between coils and plasma

coppera_m2_max = 1.e8 * copperA_m2_max

te0_ecrh_achievable = 17.5 * keV
fecrh_ignition = 0.99
max_gyrotron_frequency = 3.e11 * Hz


*---------------General Things---------------------*
cost_model = 0

*----------------Physics Variables-----------------*

betalim = 0.05 * upper beta limit
betalim_lower = 0.02 * lower beta limit
bigqmin = 1 * Minimal BigQ

powfmax = 3000. *Maximal Fusion Power


alphan = 0.35 *Density profile index
alphat = 1.2 *Temperature profile index

bt = 5.91 *Toroidal field on axis (T)
rmajor = 14.9 *Plasma major radius (m)




ifispact = 0 *Switch for neutronics calculations (0: Off)
ignite = 1 *Switch for ignition assumption (1: Ignited)
iinvqd = 1 *Switch for inverse quadrature in L-mode scaling laws 5 and 9 (1: Inverse quadrature with Neo-Alcator tau-E used)
ipedestal = 0 *Switch for pedestal profiles (0: Parabolic Profiles)
iradloss = 1 *Switch for radiation loss term usage in power balance (1: Total power lost is scaling power plus core radiation only)
isc = 38 *Switch for energy confinement time scaling law (38: ISS04)
kappa = 1.001 *Plasma separatrix elongation
ssync = 0.6 *Synchrotron wall reflectivity factor
te = 8.685715225897034 *Volume averaged electron temperature (keV)
tratio = 0.95 *Ion temperature / electron temperature
*zfear = 0 *High-Z impurity switch (0: Iron)

*--------------Stellarator Variables---------------*

iotabar = 0.9 *Rotational transform (reciprocal of tokamak q)
isthtr = 1 *Switch for stellarator auxiliary heating method (1: Electron cyclotron resonance heating)
shear = 0.5 *Magnetic shear, derivative of iotabar

*-----------------Build Variables------------------*

blnkith = 0.7 *Inboard blanket thickness (m)
blnkoth = 0.7 *Outboard blanket thickness (m)
ddwex = 0.15 *Cryostat thickness (m)
d_vv_in = 0.1 *Vacuum vessel thickness (TF coil / shield) (m)
gapds = 0.025 *Gap between inboard vacuum vessel and tf coil (m)
gapomin = 0.025 *Minimum gap between outboard vacuum vessel and TF coil (m)
scrapli = 0.15 *Gap between plasma and first wall; inboard side (m)
scraplo = 0.1 *Gap between plasma and first wall; outboard side (m)
shldith = 0.4 *Inboard shield thickness (m)
shldoth = 0.4 *Outboard shield thickness (m)
shldtth = 0.4 *Upper/lower shield thickness (m)
vgap = 0. *Vertical gap between x-point and divertor (m)
thkcas = 0.05 * Thickness TF Coil case (for stellarator: Also for toroidal direction)

*---------------Constraint Variables---------------*

pnetelin = 1000 *Required net electric power (MW)
sigvvall = 9.3e7

*-------------Current Drive Variables--------------*

etaech = 0.7 *ECH wall plug to injector efficiency
pheat = 0. *Heating power not used for current drive (MW)

*----------------Divertor Variables----------------*

anginc = 0.035 *Angle of incidence of field line on plate (rad)
divdum = 1 *Switch for divertor zeff model (1: input)
tdiv = 3. *Temperature at divertor (eV)
xpertin = 1.5 *Perpendicular heat transport coefficient (m2/s)
zeffdiv = 3. *Zeff in the divertor region (if divdum /= 0)
hldivlim = 15 *Divertor max heat flux limit

bmn = 0.0099999 *Relative radial field perturbation
f_asym = 1.1 *Divertor heat load peaking factor
f_rad = 0.85 *Radiated power fraction inF sol
f_w = 0.6 *Island size fraction factor
flpitch = 0.001 *Field line pitch (rad)

*------------------FWBs Variables------------------*

denstl = 7800. *Density of steel (kg/m3)
emult = 1.18 *Energy multiplication in blanket and shield
etahtp = 1. *Electrical efficiency of primary coolant pumps
fblbe = 0.47 *Beryllium fraction of blanket by volume
fblli2o = 0.07 *Lithium oxide fraction of blanket by volume
fbllipb = 0. *Lithium lead fraction of blanket by volume
fblss = 0.13 *Stainless steel fraction of blanket by volume
fblvd = 0. *Vanadium fraction of blanket by volume
fhole = 0. *Area fraction taken up by other holes (not used)
fwclfr = 0.1 *First wall coolant fraction
htpmw_blkt = 120. *Blanket coolant mechanical pumping power (MW)
htpmw_fw = 56. *First wall coolant mechanical pumping power (MW)
htpmw_div = 24. *Divertor coolant mechanical pumping power (MW)
primary_pumping = 0 *Switch for pumping power (0: User sets pump power directly)
secondary_cycle = 2 *Switch for power conversion cycle (2: user input thermal-electric efficiency)
vfblkt = 0.1 *Coolant void fraction in blanket (blktmodel=0)
vfshld = 0.6 *Coolant void fraction in shield

*-------------Heat Transport Variables-------------*

etath = 0.4 *Thermal to electric conversion efficiency; if seconday_cycle=2

*------------Impurity Radiation Module-------------*

*imprad_model = 1 *Switch for impurity radiation model
coreradius = 0.75 * Normalised radius defining the 'core' region
coreradiationfraction = 0. * Fraction of radiation from 'core' region that is subtracted from the loss power
fimp(1) = 1.0
fimp(2) = 0.1
fimp(3) = 0.0
fimp(4) = 0.0
fimp(5) = 0.0
fimp(6) = 0.0
fimp(7) = 0.0
fimp(8) = 0.0
fimp(9) = 0.00
fimp(10) = 0.0
fimp(11) = 0.0
fimp(12) = 0.0
fimp(13) = 0.0000 *38
fimp(14) = 0.0

*---------------------Numerics---------------------*

ioptimz = 1 *Code operation switch (1: Optimisation, VMCON only)
maxcal = 1000 *Maximum number of VMCON iterations
minmax = 7 *Switch for figure-of-merit (7: Min Capital Cost)
runtitle = HELIAS

*-----------------Tfcoil Variables-----------------*

alstrtf = 4.e8 *Maximal allowable Tresca stress
fcutfsu = 0.6 *Copper fraction of cable conductor (TF coils), Schauer: 900 SCU strands, 522 Copper strands. Value for 0.4 Helium
*i_tf_sc_mat = 1 *Switch for superconductor material in tf coils (1: ITER Nb3Sn)
i_tf_sc_mat = 5 * Switch for superconductor material in tf coils;




tftmp = 4.75 *Peak helium coolant temperature in TF coils and PF coils (K)
vftf = 0.3 *Coolant fraction of TF coil leg (itfsup=0) this is the same for conductor and strand!
fiooic = 0.2 *Fraction TF coil critical current to operation current
*fvdump = 0.6116 * F-value for dump voltage
vdalw = 12.64 * Max voltage across tf coil during quench (kv)

*-----------------WP Variables-----------------*
fjprot = 0.95 * F-value for tf coil winding pack current density
t_turn_tf = 0.068 * Dimension conductor area including steel and insulation. From Schauer study, but with a bit more conductor area. 11mm instead of 10mm diameter.)
thicndut = 0.0015 * Conduit insulation thickness (m)
thwcndut = 0.006 * thickness of steel around each conductor
tinstf = 0.01 * insulation on top of winding pack
tdmptf = 20 * Dump time

*-----------------Pfcoil Variables-----------------*

*PF coil vertical positioning adjuster
zref(1) = 3.6
zref(2) = 1.2
zref(3) = 2.5
zref(4) = 1.
zref(5) = 1.
zref(6) = 1.
zref(7) = 1.
zref(8) = 1.

*------------------Cost Variables------------------*

abktflnc = 5. *Allowable first wall/blanket neutron (MW-yr/m2)
adivflnc = 7. *Allowable divertor heat fluence (MW-yr/m2)
cfactr = 0.75 *Total plant capacity fraction
dintrt = 0. *Diff between borrowing and saving interest rates
fcap0 = 1.15 *Average cost of money for construction of plant
fcap0cp = 1.06 *Average cost of money for replaceable components
fcontng = 0.15 *Project contingency factor
fcr0 = 0.065 *Fixed charge rate during construction
fkind = 1. *Multiplier for nth of a kind costs
iavail = 0 *Switch for plant availability model (0: Use input value for cfactr)
ifueltyp = 0 *Switch (0: treat blanket divertor first wall and fraction fcdfuel of CD equipment as capital cost)
ireactor = 1 *Switch for net electric power calculations (1: Calculate MW electric and c-o-e)
lsa = 2 *Level of safety assurance switch (2: In-between)
ratecdol = 0.06 *Effective cost of money in constant dollars
tlife = 40. *Plant life (years)
ucblvd = 280. *Unit cost for blanket vanadium ($/kg)
ucdiv = 500000. *Cost of divertor blade ($)
ucme = 3.e8 *Unit cost of maintenance equipment ($)
